---
/* Footer component */
/* Types */
import type { CollectionEntry } from "astro:content";
import type { HTMLAttributes } from "astro/types";
interface Props extends HTMLAttributes<"footer"> {
  data: CollectionEntry<"footers">;
}
/* Styling */
import { tv } from "tailwind-variants";
import { getEntries } from "astro:content";
const footer = tv({
  base: "bg-muted/50 border-t border-border py-12",
});
/* Props */
const { class: className, data: footerData, ...rest } = Astro.props;
const { body, data } = footerData;
const { title, links, email } = data;
const resolvedLinks = await getEntries(links);
if (!resolvedLinks)
  throw new Error(
    `Could not resolve references to footer links. Expected an array of link entries but received: ${JSON.stringify(resolvedLinks)}`
  );
---

<footer class={footer({ class: className })} {...rest}>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div
      class="grid grid-cols-1 grid-rows-2 gap-8 md:grid-cols-3 md:grid-rows-1"
    >
      <div class="space-y-4">
        <h3 class="text-foreground font-serif text-lg font-bold capitalize">
          {title}
        </h3>
        <p class="text-foreground leading-relaxed">
          {body}
        </p>
        <div class="flex space-x-4">
          <a
            class="hover:text-primary text-foreground"
            href={`mailto:${email}`}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-mail h-5 w-5"
              ><rect width="20" height="16" x="2" y="4" rx="2"></rect><path
                d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
            </svg>
          </a>
        </div>
      </div><div class="space-y-4 md:col-start-3">
        <h4 class="font-semibold text-emerald-950">Connect</h4><div
          class="space-y-2"
        >
          {
            resolvedLinks.map((link) => (
              <a
                id={`footer-link-${String(link.data.id)}`}
                class="text-foreground hover:text-primary block capitalize"
                href={link.data.href}
              >
                {link.data.label}
              </a>
            ))
          }
        </div>
      </div>
    </div>
    <div
      class="border-border text-foreground mt-8 space-y-4 border-t pt-8 text-center"
    >
      <p>
        &copy; <span class="capitalize">{title}</span>. All rights reserved.
      </p>
      <p class="text-pretty">
        Designed and Developed by <a
          class="underline underline-offset-4"
          href="https://www.benbourgon.com">Ben Bourgon</a
        >.
      </p>
    </div>
  </div>
</footer>
